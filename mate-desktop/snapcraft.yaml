name: mate-desktop
version: 1.15
summary: MATE Desktop Environment
description: |
   The MATE Desktop Environment is the continuation of GNOME 2. It
   provides an intuitive and attractive desktop environment using traditional
   metaphors for Linux and other Unix-like operating systems.
   MATE is under active development to add support for new technologies while
   preserving a traditional desktop experience.
confinement: devmode

apps:
  mate-about:
    command: gtk-launch mate-about
    plugs:
      - home
      - x11

  pluma:
    command: gtk-launch pluma
    plugs:
      - home
      - x11

build-packages:
  - gettext
  - gtk-doc-tools
  - intltool
  - libtool
  - pkg-config

parts:
  mate-common:
    plugin: autotools
    source: https://github.com/mate-desktop/mate-common.git
    install-via: prefix
    build-packages:
      - gettext
      - intltool
      - libtool
      - pkg-config

  mate-desktop:
    plugin: autotools
    source: https://github.com/mate-desktop/mate-desktop.git
    after: [ mate-common, gtkconf ]
    configflags:
      - --disable-mpaste
      - --disable-schemas-compile
      - --disable-silent-rules
      - --disable-static
      - --with-gtk=3.0
    install-via: prefix
    build-packages:
      - gobject-introspection
      - gtk-doc-tools
      - intltool
      - libdconf-dev
      - libgirepository1.0-dev
      - libglib2.0-dev
      - libglib2.0-doc
      - libgtk-3-dev
      - libgtk-3-doc
      - libstartup-notification0-dev
      - libxml2-dev
    stage-packages:
      - libglib2.0-0
      - libgtk-3-0
      - libstartup-notification0
      - libxml2
      - hicolor-icon-theme

  mate-user-guide:
    plugin: autotools
    source: https://github.com/mate-desktop/mate-user-guide.git
    after: [ mate-common ]
    install-via: prefix
    build-packages:
      - gettext
      - gtk-doc-tools
      - intltool
      - libtool
      - pkg-config
      - libglib2.0-dev
      - yelp-tools
    stage-packages:
      - yelp

  libmatekbd:
    plugin: autotools
    source: https://github.com/mate-desktop/libmate.git
    after: [ mate-common, mate-desktop, gtkconf ]
    configflags:
      - --disable-silent-rules
      - --disable-static
      - --enable-introspection
      - --with-gtk=3.0
    install-via: prefix
    build-packages:
      - intltool
      - libgirepository1.0-dev
      - libglib2.0-dev
      - libgtk-3-dev
      - libxklavier-dev
    stage-packages:
      - iso-codes

  pluma:
    plugin: autotools
    source: https://github.com/mate-desktop/pluma.git
    after: [ mate-common, mate-desktop, gtkconf ]
    configflags:
      - --disable-python
      - --with-gtk=3.0
    install-via: prefix
    build-packages:
      - gettext
      - gtk-doc-tools
      - intltool
      - iso-codes
      - libenchant-dev
      - libglib2.0-dev
      - libgtk-3-dev
      - libgtksourceview-3.0-dev
      - libxml2-dev
      - yelp-tools
    stage-packages:
      - dconf-gsettings-backend
      - iso-codes
      - libglib2.0-0
      - libgtk-3-0
      - libpango-1.0-0
      - libgdk-pixbuf2.0-0
      - zenity

  integration:
    plugin: nil
    stage-packages:
      - dmz-cursor-theme
      - light-themes
      - ttf-ubuntu-font-family
      - ubuntu-mate-default-settings
      - ubuntu-mate-icon-themes
      - ubuntu-mate-themes
    snap:
      - usr/share
      - -usr/share/doc
